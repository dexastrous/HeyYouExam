language: php

php:
 - 7.0

before_script:
 - composer self-update
 - composer install --no-interaction
 - php artisan key:generate
 - php artisan migrate
 - npm install
 - npm run production

before_install:
 - mysql -e 'CREATE DATABASE nigel;'

services:
 - mysql

script:
 - vendor/bin/phpunit

cache:
 directories:
  - node_modules
  - vendor